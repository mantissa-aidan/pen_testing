#!/usr/bin/env bash
#
# This script installs common wireless penetration testing tools and tries to set wlan1 into monitor mode.
# Use responsibly and legally. 

# Exit on errors
set -e

echo "[*] Updating system packages..."
sudo apt-get update -y && sudo apt-get upgrade -y

echo "[*] Installing common wireless pentesting tools..."
sudo apt-get install -y aircrack-ng reaver hashcat hcxdumptool hcxtools wifite

echo
echo "[*] Installation complete. The following tools were installed:"
echo "    - aircrack-ng: Suite for wireless network auditing."
echo "    - reaver: For WPS PIN attacks."
echo "    - wifite: Automated wireless attacker."
echo "    - hashcat: Offline password cracking tool (not strictly Wi-Fi only)."
echo "    - hcxdumptool/hcxtools: Advanced WPA/WPA2 password capturing tools."
echo

# Check if wlan1 exists
if ! iw dev | grep -q wlan1; then
    echo "[!] wlan1 interface not found. Please ensure that your Wi-Fi adapter is plugged in."
    exit 1
fi

echo "[*] Checking if wlan1 supports monitor mode..."

# Bring the interface down before changing mode
sudo ip link set wlan1 down || true

# Try setting wlan1 to monitor mode
if sudo iw dev wlan1 set type monitor 2>/dev/null; then
    echo "[*] wlan1 set to monitor mode successfully."
    sudo ip link set wlan1 up
    echo "[*] wlan1 is now up in monitor mode."
else
    echo "[!] Failed to set wlan1 to monitor mode. Your adapter may not support it."
    echo "    You can try a different adapter or check chipset compatibility."
fi

echo
echo "[*] Setup is complete. Remember:"
echo "    - Only perform penetration testing on networks you own or have permission to test."
echo "    - Consult your local laws and university guidelines."
echo
